/*!
 * ZUI: 标签页管理器 - v1.7.0 - 2017-12-26
 * http://zui.sexy
 * GitHub: https://github.com/easysoft/zui.git 
 * Copyright (c) 2017 cnezsoft.com; Licensed MIT
 */
!function(t){"use strict";var a=function(a){var e=this;"string"==typeof a?e.url=a:t.isPlainObject(a)&&t.extend(e,a),e.id||(e.id=t.zui.uuid()),e.type||(e.iframe?(e.type="iframe",e.url=e.iframe):e.ajax?(e.type="ajax",e.url=t.isPlainObject(e.ajax)?e.ajax.url:e.ajax):e.custom?e.type="custom":e.type="iframe"),e.createTime=(new Date).getTime(),e.onCreate&&e.onCreate.call(e)};a.prototype.open=function(){var t=this;t.openTime=(new Date).getTime(),t.onOpen&&t.onOpen.call(t)},a.prototype.close=function(){var t=this;t.openTime=0,t.onClose&&t.onClose.call(t)},a.create=function(t){return t instanceof a?t:new a(t)};var e="zui.tabs",n={zh_cn:{close:"关闭"}},i=function(o,s){var c=this;c.name=e,c.$=t(o),s=c.options=t.extend({},i.DEFAULTS,this.$.data(),s);var r=s.lang||"zh_cn";c.lang=t.isPlainObject(r)?t.extend(!0,{},n[r.lang||t.zui.clientLang()],r):n[r];var l=c.$.find(".tabs-navbar");l.length||(l=t('<nav class="tabs-navbar"></nav>').appendTo(c.$)),c.$navbar=l;var p=l.find(".tabs-nav");p.length||(p=t('<ul class="tabs-nav"></ul>').appendTo(l)),c.$nav=p;var b=c.$.find(".tabs-container");b.length||(b=t('<div class="tabs-container"></div>').appendTo(c.$)),c.$tabs=b,c.activeTabId=s.defaultTab;var v=s.tabs||[];c.tabs={},t.each(v,function(t,e){var n=a.create(e);c.tabs[n.id]=n,c.activeTabId||(c.activeTabId=n.id),c.renderTab(n)}),c.closedTabs=[],c.open(c.getActiveTab()),p.on("click."+e,".tabs-nav-item",function(){c.open(c.getTab(t(this).data("id")))}).on("click."+e,".tabs-nav-close",function(a){c.close(t(this).closest(".tabs-nav-item").data("id")),a.stopPropagation()})};i.prototype.renderTab=function(a,e){var n=this,i=(n.$nav,t("#tabs-nav-item-"+a.id));if(!i.length){var o=t('<a class="tabs-nav-item"><i class="icon"></i><span class="text"></span><i class="close tabs-nav-close" title="'+n.lang.close+'"></i></a>').attr({href:"#tabs-item-"+a.id,id:a.id});if(i=t('<li id="tabs-nav-item-'+a.id+'" />').append(o).appendTo(n.$nav),e){var s=t("#tabs-nav-item-"+e);s.length&&i.insertAfter(s)}}var o=i.find("a").attr("title",a.desc);o.find(".icon").attr("class","icon "+(a.icon||n.options.defaultTabIcon)),o.find(".text").text(a.title||"")},i.prototype.getActiveTab=function(){var t=this;return t.activeTabId?t.tabs[t.activeTabId]:null},i.prototype.getTab=function(t){var a=this;return t?("object"==typeof t&&(t=t.id),a.tabs[t]):a.getActiveTab()},i.prototype.close=function(a){var e=this,n=e.getTab(a);n&&(t("#tabs-nav-item-"+n.id).remove(),t("#tabs-pane-"+n.id).remove(),n.close(),e.closedTabs.push(n))},i.prototype.open=function(a){that.render(a);t("tabs-nav-item-"+a.id)},i.prototype.refresh=function(t){},i.prototype.closeOthers=function(t){},i.prototype.closeRight=function(t){},i.prototype.closeAll=function(){},i.prototype.reopen=function(){},t.fn.tabs=function(a){return this.each(function(){var n=t(this),o=n.data(e),s="object"==typeof a&&a;o||n.data(e,o=new i(this,s)),"string"==typeof a&&o[a]()})},i.NAME=e,t.fn.tabs.Constructor=i}(jQuery);